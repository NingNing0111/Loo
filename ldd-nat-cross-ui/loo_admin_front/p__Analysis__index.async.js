"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[217],{97629:function(W,P,t){t.r(P),t.d(P,{default:function(){return te}});var U=t(90228),i=t.n(U),w=t(87999),p=t.n(w),k=t(48305),f=t.n(k),F=t(51465),I=t(39572),S=t(5737),J=t(16722),u=t(75271),g=t(26068),l=t.n(g),L=t(40195);function y(m,e){return v.apply(this,arguments)}function v(){return v=p()(i()().mark(function m(e,s){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,L.request)("/api/serverSystem/analysis",l()({method:"GET",params:l()({},e)},s||{})));case 1:case"end":return n.stop()}},m)})),v.apply(this,arguments)}function ae(m,e){return V.apply(this,arguments)}function V(){return V=_asyncToGenerator(_regeneratorRuntime().mark(function m(e,s){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/serverSystem/list",_objectSpread({method:"GET",params:_objectSpread(_objectSpread({},e),{},{arg0:void 0},e.arg0)},s||{})));case 1:case"end":return n.stop()}},m)})),V.apply(this,arguments)}var j=t(82045),$=t(81955),G=t(38688),a=t(52676),X=function(e){var s={title:{text:""},tooltip:{trigger:"axis"},legend:{data:["JVM\u6700\u5927\u53EF\u7528\u5185\u5B58","JVM\u5DF2\u5206\u914D\u7684\u603B\u5185\u5B58","JVM\u5269\u4F59\u5185\u5B58","JVM\u5DF2\u7528\u5185\u5B58"]},xAxis:{type:"category",data:e.map(function(r){return r.registerTime}),axisLabel:{rotate:45,formatter:function(n){return n}}},yAxis:{type:"value",axisLabel:{formatter:function(n){return n+"MB"}}},series:[{name:"JVM\u6700\u5927\u53EF\u7528\u5185\u5B58",type:"line",data:e.map(function(r){return(r.jvmMaxMemory/1024/1024).toFixed(2)}),smooth:!1},{name:"JVM\u5DF2\u5206\u914D\u7684\u603B\u5185\u5B58",type:"line",data:e.map(function(r){return(r.jvmTotalMemory/1024/1024).toFixed(2)}),smooth:!1},{name:"JVM\u5DF2\u7528\u5185\u5B58",type:"line",data:e.map(function(r){return((r.jvmTotalMemory-r.jvmFreeMemory)/1024/1024).toFixed(2)}),smooth:!1},{name:"JVM\u5269\u4F59\u5185\u5B58",type:"line",data:e.map(function(r){return(r.jvmFreeMemory/1024/1024).toFixed(2)}),smooth:!1}]};return s},H=function(e){var s=0,r=0,n=0;e.jvmFreeMemory&&(s=e.jvmFreeMemory/1024/1024),e.jvmTotalMemory&&e.jvmFreeMemory&&(r=(e.jvmTotalMemory-e.jvmFreeMemory)/1024/1024),e.jvmMaxMemory&&(n=e.jvmMaxMemory/1024/1024);var C={title:{text:"JVM \u5185\u5B58\u4F7F\u7528\u5360\u6BD4",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} MB ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"\u5185\u5B58\u5360\u6BD4",type:"pie",radius:"50%",data:[{value:r.toFixed(2),name:"JVM\u5DF2\u4F7F\u7528\u5185\u5B58"},{value:s.toFixed(2),name:"JVM\u5269\u4F59\u5185\u5B58"},{value:(n-r-s).toFixed(2),name:"\u672A\u4F7F\u7528\u5185\u5B58"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};return C},Q=function(e){var s={title:{text:"GC \u7EDF\u8BA1\u4FE1\u606F",left:"center"},tooltip:{trigger:"axis"},legend:{data:["GC \u603B\u6B21\u6570","GC \u603B\u8017\u65F6"],bottom:0},xAxis:{type:"category",data:e.map(function(r){return r.registerTime}),axisLabel:{rotate:45,formatter:function(n){return n}}},yAxis:[{type:"value",name:"GC \u6B21\u6570",position:"left"},{type:"value",name:"GC \u8017\u65F6 (ms)",position:"right",splitLine:{show:!1}}],series:[{name:"GC \u603B\u6B21\u6570",type:"bar",data:e.map(function(r){return r.gcCount}),yAxisIndex:0},{name:"GC \u603B\u8017\u65F6",type:"bar",data:e.map(function(r){return r.gcTime}),yAxisIndex:1}]};return s},Y=function(e){var s=0,r=0;e.diskFree&&e.diskTotal&&(s=e.diskTotal-e.diskFree,r=e.diskFree);var n={title:{text:"\u78C1\u76D8\u4F7F\u7528\u60C5\u51B5",left:"center"},tooltip:{trigger:"item",formatter:"{b}: {c} GB ({d}%)"},legend:{orient:"vertical",left:"left",data:["\u5DF2\u7528\u5BB9\u91CF","\u5269\u4F59\u5BB9\u91CF"]},series:[{name:"\u78C1\u76D8\u4F7F\u7528\u60C5\u51B5",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:(s/1024/1024/1024).toFixed(2),name:"\u5DF2\u7528\u5BB9\u91CF"},{value:(r/1024/1024/1024).toFixed(2),name:"\u5269\u4F59\u5BB9\u91CF"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{formatter:"{b}: {d}%"}}]};return n},q=function(e){var s=(0,u.useState)([]),r=f()(s,2),n=r[0],C=r[1],Z=(0,u.useState)(!1),B=f()(Z,2),x=B[0],D=B[1],M=(0,u.useState)(),_=f()(M,2),h=_[0],N=_[1],o=(0,u.useState)("day"),R=f()(o,2),z=R[0],ne=R[1],K=function(){var E=p()(i()().mark(function T(d){var c;return i()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return D(!0),O.next=3,y({serverName:e.serverName,timeType:d});case 3:c=O.sent,c.length>0&&N(c[c.length-1]),d==="month"&&(c=c.map(function(b){return l()(l()({},b),{},{registerTime:b.registerTime?b.registerTime.split("T")[0]:""})})),d==="day"&&(c=c.map(function(b){return l()(l()({},b),{},{registerTime:b.registerTime?b.registerTime.split("T")[1]:""})})),C(c),D(!1);case 9:case"end":return O.stop()}},T)}));return function(d){return E.apply(this,arguments)}}();return(0,u.useEffect)(function(){K(z)},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(j.Z,{collapsible:!0,ghost:!0,title:"\u670D\u52A1\u540D\u79F0:[".concat(e.serverName,"]"),extra:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)($.Z,{onChange:function(){var E=p()(i()().mark(function T(d){return i()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return ne(d),A.next=3,K(d);case 3:console.log("\u6267\u884C\u4E86\u8BF7\u6C42\u6570\u636E");case 4:case"end":return A.stop()}},T)}));return function(T){return E.apply(this,arguments)}}(),value:z,style:{width:120,marginRight:10},children:[(0,a.jsx)($.Z.Option,{value:"day",children:"24h"}),(0,a.jsx)($.Z.Option,{value:"month",children:"1\u4E2A\u6708\u5185"})]}),(0,a.jsx)(S.ZP,{onClick:p()(i()().mark(function E(){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,K(z);case 2:case"end":return d.stop()}},E)})),type:"primary",children:"\u5237\u65B0"})]}),bordered:!0,headerBordered:!0,children:[(0,a.jsxs)(j.Z.Group,{children:[(0,a.jsx)(j.Z,{bordered:!0,colSpan:"50%",children:n.length>0&&(0,a.jsx)(G.Z,{option:X(n),showLoading:x})}),(0,a.jsx)(j.Z,{bordered:!0,colSpan:"50%",children:n.length>0&&(0,a.jsx)(G.Z,{option:Q(n),showLoading:x})})]}),(0,a.jsxs)(j.Z.Group,{children:[(0,a.jsx)(j.Z,{bordered:!0,colSpan:"50%",children:h&&(0,a.jsx)(G.Z,{option:H(h),showLoading:x})}),(0,a.jsx)(j.Z,{bordered:!0,colSpan:"50%",children:h&&(0,a.jsx)(G.Z,{option:Y(h),showLoading:x})})]})]})})},ee=q,re=function(){var e=(0,u.useState)([]),s=f()(e,2),r=s[0],n=s[1],C=(0,u.useState)(!1),Z=f()(C,2),B=Z[0],x=Z[1],D=function(){var M=p()(i()().mark(function _(){var h;return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return x(!0),o.prev=1,o.next=4,(0,F.S)();case 4:h=o.sent,h&&n(h.filter(function(R){return R.isLive})),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(1),n([]);case 11:return o.prev=11,x(!1),o.finish(11);case 14:case"end":return o.stop()}},_,null,[[1,8,11,14]])}));return function(){return M.apply(this,arguments)}}();return(0,u.useEffect)(function(){D()},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(I._z,{loading:B,extra:r.length===0&&(0,a.jsx)(S.ZP,{type:"primary",onClick:function(){D()},children:"\u5237\u65B0"}),children:r.length===0?(0,a.jsx)(J.Z,{description:"\u6682\u65E0\u5728\u7EBF\u7684\u670D\u52A1"}):r.map(function(M){var _;return(0,a.jsx)(ee,{serverName:(_=M.serverName)!==null&&_!==void 0?_:""},M.serverName)})})})},te=re},51465:function(W,P,t){t.d(P,{S:function(){return J},v:function(){return I}});var U=t(90228),i=t.n(U),w=t(26068),p=t.n(w),k=t(87999),f=t.n(k),F=t(40195);function I(g,l){return S.apply(this,arguments)}function S(){return S=f()(i()().mark(function g(l,L){return i()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,F.request)("/api/server/historyList",p()({method:"GET",params:p()(p()({},l),{},{arg0:void 0},l.arg0)},L||{})));case 1:case"end":return v.stop()}},g)})),S.apply(this,arguments)}function J(g){return u.apply(this,arguments)}function u(){return u=f()(i()().mark(function g(l){return i()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,F.request)("/api/server/list",p()({method:"GET"},l||{})));case 1:case"end":return y.stop()}},g)})),u.apply(this,arguments)}}}]);
